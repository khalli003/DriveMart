<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Управление Курьерами</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
</head>
<body>
<div class="container">
    <h1>Управление Курьерами</h1>

    <form id="courierForm">
        <div class="form-group">
            <label for="name">Имя Курьера</label>
            <input type="text" class="form-control" id="name" required>
        </div>
        <div class="form-group">
            <label for="region">Регион</label>
            <input type="text" class="form-control" id="region" required>
        </div>
        <div class="form-group">
            <label for="companyId">ID Компании</label>
            <input type="number" class="form-control" id="companyId" required>
        </div>
        <div class="form-group">
            <label for="balance">Баланс</label>
            <input type="number" class="form-control" id="balance" value="0" step="0.01" required>
        </div>
        <button type="submit" class="btn btn-primary">Добавить Курьера</button>
    </form>

    <h2>Список Курьеров</h2>
    <table class="table table-bordered" id="courierTable">
        <thead>
        <tr>
            <th>ID</th>
            <th>Имя</th>
            <th>Регион</th>
            <th>ID Компании</th>
            <th>Баланс</th>
            <th>Действия</th>
        </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script>
    const apiUrl = '/couriers';

    // Функция для отображения курьеров
    function fetchCouriers() {
        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                const tableBody = document.getElementById('courierTable').getElementsByTagName('tbody')[0];
                tableBody.innerHTML = ''; // Очищаем таблицу
                data.forEach(courier => {
                    const row = tableBody.insertRow();
                    row.innerHTML = `
                        <td>${courier.id}</td>
                        <td>${courier.name}</td>
                        <td>${courier.region}</td>
                        <td>${courier.company ? courier.company.id : 'Нет компании'}</td>
                        <td>${courier.balance}</td>
                        <td>
                            <button onclick="deleteCourier(${courier.id})" class="btn btn-danger">Удалить</button>
                            <button onclick="updateCourier(${courier.id})" class="btn btn-info">Редактировать</button>
                        </td>
                    `;
                });
            });
    }

    // Функция для добавления курьера
    document.getElementById('courierForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const newCourier = {
            name: document.getElementById('name').value,
            region: document.getElementById('region').value,
            company: { id: parseInt(document.getElementById('companyId').value) },
            balance: parseFloat(document.getElementById('balance').value)
        };

        fetch(apiUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(newCourier)
        })
            .then(response => response.json())
            .then(() => {
                document.getElementById('courierForm').reset(); // Очистить форму
                fetchCouriers(); // Обновить список курьеров
            });
    });

    // Функция для удаления курьера
    function deleteCourier(id) {
        fetch(`${apiUrl}/${id}`, {
            method: 'DELETE'
        })
            .then(() => {
                fetchCouriers(); // Обновить список курьеров после удаления
            });
    }

    // Функция для обновления курьера
    function updateCourier(id) {
        const name = prompt('Введите новое имя:', '');
        const region = prompt('Введите новый регион:', '');
        const balance = prompt('Введите новый баланс:', '');

        if (name && region && balance) {
            const updatedCourier = {
                name: name,
                region: region,
                balance: parseFloat(balance)
            };

            fetch(`${apiUrl}/${id}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(updatedCourier)
            })
                .then(() => {
                    fetchCouriers(); // Обновить список курьеров после обновления
                });
        }
    }

    // Инициализация
    fetchCouriers();
</script>
</body>
</html>
>