<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Управление Автомобилями</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
</head>
<body>
<div class="container">
  <h1>Управление Автомобилями</h1>

  <form id="carForm">
    <div class="form-group">
      <label for="licensePlate">Номерной знак</label>
      <input type="text" class="form-control" id="licensePlate" required>
    </div>
    <div class="form-group">
      <label for="model">Модель</label>
      <input type="text" class="form-control" id="model" required>
    </div>
    <div class="form-group">
      <label for="category">Категория</label>
      <input type="text" class="form-control" id="category" required>
    </div>
    <button type="submit" class="btn btn-primary">Добавить Автомобиль</button>
  </form>

  <h2>Список Автомобилей</h2>
  <table class="table table-bordered" id="carTable">
    <thead>
    <tr>
      <th>ID</th>
      <th>Номерной знак</th>
      <th>Модель</th>
      <th>Категория</th>
      <th>Действия</th>
    </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
  const apiUrl = '/cars';

  // Функция для отображения автомобилей
  function fetchCars() {
    fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
              const tableBody = document.getElementById('carTable').getElementsByTagName('tbody')[0];
              tableBody.innerHTML = ''; // Очищаем таблицу
              data.forEach(car => {
                const row = tableBody.insertRow();
                row.innerHTML = `
                        <td>${car.id}</td>
                        <td>${car.licensePlate}</td>
                        <td>${car.model}</td>
                        <td>${car.category}</td>
                        <td>
                            <button onclick="deleteCar(${car.id})" class="btn btn-danger">Удалить</button>
                        </td>
                    `;
              });
            });
  }

  // Функция для добавления автомобиля
  document.getElementById('carForm').addEventListener('submit', function (e) {
    e.preventDefault();
    const newCar = {
      licensePlate: document.getElementById('licensePlate').value,
      model: document.getElementById('model').value,
      category: document.getElementById('category').value
    };

    fetch(apiUrl, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(newCar)
    })
            .then(response => response.json())
            .then(() => {
              document.getElementById('carForm').reset(); // Очистить форму
              fetchCars(); // Обновить список автомобилей
            });
  });

  // Функция для удаления автомобиля
  function deleteCar(id) {
    fetch(`${apiUrl}/${id}`, {
      method: 'DELETE'
    })
            .then(() => {
              fetchCars(); // Обновить список автомобилей после удаления
            });
  }

  // Инициализация
  fetchCars();
</script>
</body>
</html>
>